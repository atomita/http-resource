var _ns_={id:"atomita.http.resource",doc:"base of the resource class."},lodash=require("lodash"),atomita_http_request=require("./request"),request=atomita_http_request,defaults={params:{},actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},update:{method:"PUT"},remove:{method:"DELETE"},"delete":{method:"DELETE"}},options:{mergeActions:!0}},resource=function(e,t){return function(){var r=function(){var e=Array.prototype.slice.call(arguments,0);return Resource.apply(this,e)},o=lodash.defaults(t,defaults),s=o.params||defaults.params,n=lodash.defaults(o.options||{},defaults.options),a=lodash.defaults(o.actions||{},n.mergeActions?defaults.actions:{}),u=buildUrl(e,s);return r.prototype=lodash.create(Resource.prototype,{value:r,enumerable:!1,writable:!0,configurable:!0}),defineActions(r.prototype,a,u,s),defineActions(r,a,u,s),r}.call(this)};module.exports=resource;var buildUrl=function(e,t){return function(){var t=function(e,t){return e};return e.replace(RegExp("(?::)([^:/]+)","g"),function(e,r,o){return function(){var s=t;return t=function(t,n){return s(t.slice(0,o)+(lodash.has(n,r)?lodash.get(n,r):e)+t.slice(o+e.length),n)}}.call(this)}),function(r){return t(e,r)}}.call(this)},defineActions=function(e,t,r,o){return function s(){var n=s,a=lodash.keysIn(t);do n=a.length?function(){var n=lodash.first(a),u=t[n];return e[n]=function(e,t){return function(){var s=lodash.defaults(e||{},this instanceof Resource?this:{},u.params||{},o),n=lodash.defaults(t||{},u);return 0<=lodash.indexOf(["GET","HEAD"],u.method.toUpperCase())?n.query=lodash.defaults(n.query||{},s):void 0,request(u.method,r(s),s,n,this instanceof Resource?this.constructor:this)}.call(this)},s[0]=lodash.slice(a,1),s}.call(this):void 0;while(a=s[0],n===s);return n}.call(this)},Resource=function(e,t){return function(){var r=e||{},o=t||{},s=function(){return lodash.extend(this,r)};return this.response=o,s.prototype=this,new s}.call(this)};